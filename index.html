<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIG 3 1RM Calculator</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Background Image Carousel -->
    <div class="bg-slider">
        <div class="bg-slide" style="background-image: url('assets/images/bg-1.jpg'); animation-delay: 0s;"></div>
        <div class="bg-slide" style="background-image: url('assets/images/bg-2.jpg'); animation-delay: 6s;"></div>
        <div class="bg-slide" style="background-image: url('assets/images/bg-3.jpg'); animation-delay: 12s;"></div>
        <div class="bg-slide" style="background-image: url('assets/images/bg-4.jpg'); animation-delay: 18s;"></div>
        <div class="bg-slide" style="background-image: url('assets/images/bg-5.jpg'); animation-delay: 24s;"></div>
        <div class="bg-slide" style="background-image: url('assets/images/bg-6.jpg'); animation-delay: 30s;"></div>
    </div>
    <div class="bg-overlay"></div>

    <div class="container" style="position: relative; z-index: 1;">
        <header>
            <h1>BIG 3 1RM Calculator</h1>
            <p>筋力アップのためのMAX重量計算 & メニュー管理</p>
            <div class="tabs">
                <button class="tab-btn active" data-tab="calc-tab">1RM 計算機</button>
                <button class="tab-btn" data-tab="menu-tab">メニュー登録</button>
                <button class="tab-btn" data-tab="review-tab">トレーニング記録</button>
                <button class="tab-btn" data-tab="settings-tab">設定</button>
            </div>
        </header>

        <main>
            <!-- 1RM Calculator Tab -->
            <div id="calc-tab" class="tab-content active">
                <div class="card input-section">
                    <div class="exercise-selector">
                        <input type="radio" id="benchpress" name="exercise" value="benchpress" checked>
                        <label for="benchpress" class="exercise-btn" data-color="#3b82f6">ベンチプレス</label>

                        <input type="radio" id="deadlift" name="exercise" value="deadlift">
                        <label for="deadlift" class="exercise-btn" data-color="#ef4444">デッドリフト</label>

                        <input type="radio" id="squat" name="exercise" value="squat">
                        <label for="squat" class="exercise-btn" data-color="#10b981">スクワット</label>
                    </div>
                    <div class="input-group">
                        <label for="weight">持ち上げた重量 (kg)</label>
                        <input type="number" id="weight" placeholder="例: 80" min="1" step="0.5">
                    </div>
                    <div class="input-group">
                        <label for="reps">回数 (レップス)</label>
                        <input type="number" id="reps" placeholder="例: 8" min="1" step="1">
                    </div>
                    <button id="calculate-btn">計算する</button>
                </div>

                <div class="card records-section" id="records-section" style="margin-top: 1.5rem; display: none;">
                    <h2
                        style="font-size: 1.1rem; margin-bottom: 1rem; color: #ffffff; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem; font-weight: 500; letter-spacing: 0.05em;">
                        保存データからの自己ベスト (<span id="record-exercise-name">ベンチプレス</span>)</h2>
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); border-radius: 8px; padding: 1rem; border: 1px solid var(--border-color);">
                        <div style="text-align: center; flex: 1; border-right: 1px solid rgba(255,255,255,0.05);">
                            <div
                                style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 0.05em;">
                                最大挙上重量
                            </div>
                            <div style="font-size: 1.3rem; font-weight: 700; color: #ffffff;" id="record-max-weight">--
                                kg</div>
                            <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.2rem;"
                                id="record-max-weight-date">--</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div
                                style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 0.05em;">
                                推定1RM
                                (Max)</div>
                            <div style="font-size: 1.3rem; font-weight: 700; color: #ffffff;" id="record-max-1rm">-- kg
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.2rem;"
                                id="record-max-1rm-date">--</div>
                        </div>
                    </div>
                </div>

                <div class="results-section hidden" id="results">
                    <h2>推定 MAX重量 (1RM)</h2>
                    <div class="average-result">
                        <span class="label">平均推定値</span>
                        <span class="value" id="average-1rm">-- kg</span>
                    </div>

                    <div class="formulas-grid">
                        <div class="formula-card">
                            <span class="formula-name">Epley方式</span>
                            <span class="formula-value" id="epley-1rm">-- kg</span>
                        </div>
                        <div class="formula-card">
                            <span class="formula-name">Brzycki方式</span>
                            <span class="formula-value" id="brzycki-1rm">-- kg</span>
                        </div>
                        <div class="formula-card">
                            <span class="formula-name">O'Conner方式</span>
                            <span class="formula-value" id="oconner-1rm">-- kg</span>
                        </div>
                    </div>

                    <div class="training-guide">
                        <h3>目的別 トレーニング重量目安</h3>
                        <ul class="guide-list">
                            <li>
                                <span class="reps">3回 (約90% / 筋力UP)</span>
                                <span class="weight" id="target-3rm">-- kg</span>
                            </li>
                            <li>
                                <span class="reps">5回 (約87% / 筋力・筋肥大)</span>
                                <span class="weight" id="target-5rm">-- kg</span>
                            </li>
                            <li>
                                <span class="reps">8回 (約80% / 筋肥大)</span>
                                <span class="weight" id="target-8rm">-- kg</span>
                            </li>
                            <li>
                                <span class="reps">10回 (約75% / 筋肥大・持久力)</span>
                                <span class="weight" id="target-10rm">-- kg</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Workout Menu Tab -->
            <div id="menu-tab" class="tab-content hidden">

                <!-- Step Indicator Progress Bar -->
                <div class="wizard-progress"
                    style="display: flex; justify-content: space-between; align-items: center; margin: 0 1rem 2rem 1rem; position: relative;">
                    <div class="progress-step active" id="indicator-step-1">
                        <div class="step-circle">1</div>
                        <span class="step-label">日時</span>
                    </div>
                    <div class="progress-line"></div>
                    <div class="progress-step" id="indicator-step-2">
                        <div class="step-circle">2</div>
                        <span class="step-label">方法</span>
                    </div>
                    <div class="progress-line"></div>
                    <div class="progress-step" id="indicator-step-3">
                        <div class="step-circle">3</div>
                        <span class="step-label">構築</span>
                    </div>
                </div>

                <!-- WIZARD STEP 1: Date & Duration -->
                <div id="wizard-step-1" class="wizard-step">
                    <div class="card date-section" style="margin-bottom: 1.5rem;">
                        <h2
                            style="font-size: 1.1rem; margin-bottom: 1.5rem; color: var(--text-primary); text-align: center; font-weight: 600;">
                            1. 記録する日時を選択</h2>
                        <div class="input-row" style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
                            <div class="input-group" style="flex: 1; margin-bottom: 0;">
                                <label for="workout-date">日付</label>
                                <input type="date" id="workout-date" style="cursor: pointer;">
                            </div>
                        </div>
                        <button id="step1-next-btn"
                            style="background: var(--text-primary); color: #000000; font-weight: 700;">次へ進む</button>
                    </div>
                </div>

                <!-- WIZARD STEP 2: Copy or New -->
                <div id="wizard-step-2" class="wizard-step" style="display: none;">
                    <div class="card" style="margin-bottom: 1.5rem;">
                        <h2
                            style="font-size: 1.1rem; margin-bottom: 1.5rem; color: var(--text-primary); text-align: center; font-weight: 600;">
                            2. メニューの作成方法</h2>

                        <div
                            style="margin-bottom: 2rem; padding: 1.5rem; background: rgba(255,255,255,0.03); border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                            <label for="copy-date-select"
                                style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.95rem;">A.
                                過去の記録からコピーして始める</label>
                            <div style="display: flex; gap: 0.5rem; align-items: stretch;">
                                <select id="copy-date-select" class="input-group"
                                    style="margin-bottom: 0; flex: 2; cursor: pointer; padding: 0.8rem;">
                                    <option value="" disabled selected>日付を選択</option>
                                    <!-- JSで動的に追加される -->
                                </select>
                                <button id="copy-menu-btn"
                                    style="flex: 1; margin: 0; padding: 0.8rem; background: var(--text-primary); color: #000000;">コピー</button>
                            </div>
                        </div>

                        <div style="text-align: center; margin-bottom: 2rem; position: relative;">
                            <hr style="border-color: rgba(255,255,255,0.1); margin: 0;">
                            <span
                                style="position: absolute; top: -0.8rem; left: 50%; transform: translateX(-50%); background: var(--card-bg); padding: 0 1rem; color: var(--text-secondary); font-size: 0.85rem;">または</span>
                        </div>

                        <div style="margin-bottom: 1.5rem; text-align: center;">
                            <button id="step2-new-btn"
                                style="background: transparent; border: 1px solid var(--text-primary); color: var(--text-primary); padding: 1rem;">B.
                                新しくメニューを作る</button>
                        </div>

                        <button id="step2-back-btn" class="btn-secondary" style="border: none; padding: 0.5rem;">←
                            戻る</button>
                    </div>
                </div>

                <!-- WIZARD STEP 3: Edit Menu -->
                <div id="wizard-step-3" class="wizard-step" style="display: none;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="font-size: 1.1rem; color: var(--text-primary); font-weight: 600;">3. メニュー編集</h2>
                        <button id="step3-back-btn"
                            style="background: transparent; border: none; color: var(--text-secondary); padding: 0; width: auto; font-size: 0.9rem; margin: 0; box-shadow: none;">変更方法を選び直す</button>
                    </div>

                    <div class="card input-section">
                        <div class="input-group">
                            <label for="category-filter">部位フィルター</label>
                            <select id="category-filter" style="margin-bottom: 1rem;">
                                <option value="オール" selected>すべての部位</option>
                                <option value="胸（Chest）">胸（Chest）</option>
                                <option value="背中（Back）">背中（Back）</option>
                                <option value="足（Legs）">足（Legs）</option>
                                <option value="肩（Shoulders）">肩（Shoulders）</option>
                                <option value="上腕二頭筋（Biceps）">上腕二頭筋（Biceps）</option>
                                <option value="上腕三頭筋（Triceps）">上腕三頭筋（Triceps）</option>
                            </select>
                            <label for="menu-exercise">種目名</label>
                            <select id="menu-exercise" class="exercise-select">
                                <option value="" disabled selected>種目を選択してください</option>

                                <optgroup label="胸（Chest）">
                                    <option value="ベンチプレス">ベンチプレス</option>
                                    <option value="インクライン・ベンチプレス">インクライン・ベンチプレス</option>
                                    <option value="デクライン・ベンチプレス">デクライン・ベンチプレス</option>
                                    <option value="ダンベル・ベンチプレス">ダンベル・ベンチプレス</option>
                                    <option value="インクライン・ダンベルプレス">インクライン・ダンベルプレス</option>
                                    <option value="デクライン・ダンベルプレス">デクライン・ダンベルプレス</option>
                                    <option value="ダンベル・フライ">ダンベル・フライ</option>
                                    <option value="インクライン・ダンベルフライ">インクライン・ダンベルフライ</option>
                                    <option value="ダンベル・プルオーバー">ダンベル・プルオーバー</option>
                                    <option value="チェストプレス（マシン）">チェストプレス（マシン）</option>
                                    <option value="ペックデック・フライ">ペックデック・フライ</option>
                                    <option value="ケーブル・クロスオーバー">ケーブル・クロスオーバー</option>
                                    <option value="スミスマシン・ベンチプレス">スミスマシン・ベンチプレス</option>
                                    <option value="ディップス">ディップス</option>
                                    <option value="マシン・ケーブル（胸）">マシン・ケーブル（胸）</option>
                                </optgroup>

                                <optgroup label="背中（Back）">
                                    <option value="デッドリフト">デッドリフト</option>
                                    <option value="ベントオーバー・ロウ（バーベルロウ）">ベントオーバー・ロウ（バーベルロウ）</option>
                                    <option value="ペンドレイ・ロウ">ペンドレイ・ロウ</option>
                                    <option value="Tバー・ロウ">Tバー・ロウ</option>
                                    <option value="ワンアーム・ダンベルロウ">ワンアーム・ダンベルロウ</option>
                                    <option value="ラットプルダウン">ラットプルダウン</option>
                                    <option value="シーテッド・ケーブルロウ">シーテッド・ケーブルロウ</option>
                                    <option value="ストレートアーム・プルダウン">ストレートアーム・プルダウン</option>
                                    <option value="マシン・ロウ">マシン・ロウ</option>
                                    <option value="チンニング（懸垂）">チンニング（懸垂）</option>
                                </optgroup>

                                <optgroup label="足（Legs）">
                                    <option value="スクワット（バックスクワット）">スクワット（バックスクワット）</option>
                                    <option value="フロント・スクワット">フロント・スクワット</option>
                                    <option value="ルーマニアン・デッドリフト（RDL）">ルーマニアン・デッドリフト（RDL）</option>
                                    <option value="スティフレッグド・デッドリフト">スティフレッグド・デッドリフト</option>
                                    <option value="ブルガリアン・スクワット">ブルガリアン・スクワット</option>
                                    <option value="レッグプレス">レッグプレス</option>
                                    <option value="ハックスクワット（マシン）">ハックスクワット（マシン）</option>
                                    <option value="レッグ・エクステンション">レッグ・エクステンション</option>
                                    <option value="レッグ・カール（シーテッド／ライイング）">レッグ・カール（シーテッド／ライイング）</option>
                                    <option value="ヒップ・スラスト">ヒップ・スラスト</option>
                                    <option value="ケーブル・プルスルー">ケーブル・プルスルー</option>
                                    <option value="カーフレイズ（スタンディング／シーテッド）">カーフレイズ（スタンディング／シーテッド）</option>
                                </optgroup>

                                <optgroup label="肩（Shoulders）">
                                    <option value="オーバーヘッドプレス（ミリタリープレス）">オーバーヘッドプレス（ミリタリープレス）</option>
                                    <option value="アップライト・ロウ">アップライト・ロウ</option>
                                    <option value="バーベル・シュラッグ">バーベル・シュラッグ</option>
                                    <option value="ダンベル・ショルダープレス">ダンベル・ショルダープレス</option>
                                    <option value="アーノルド・プレス">アーノルド・プレス</option>
                                    <option value="サイドレイズ">サイドレイズ</option>
                                    <option value="フロントレイズ">フロントレイズ</option>
                                    <option value="リアレイズ（リアデルト・フライ）">リアレイズ（リアデルト・フライ）</option>
                                    <option value="ダンベル・シュラッグ">ダンベル・シュラッグ</option>
                                    <option value="マシン・ショルダープレス">マシン・ショルダープレス</option>
                                    <option value="ケーブル・サイドレイズ">ケーブル・サイドレイズ</option>
                                    <option value="ケーブル・フロントレイズ">ケーブル・フロントレイズ</option>
                                    <option value="フェイスプル">フェイスプル</option>
                                    <option value="リアデルト・マシン（リバース・ペックデック）">リアデルト・マシン（リバース・ペックデック）</option>
                                    <option value="スミスマシン・ショルダープレス">スミスマシン・ショルダープレス</option>
                                    <option value="マシン・ケーブル（肩）">マシン・ケーブル（肩）</option>
                                </optgroup>

                                <optgroup label="上腕二頭筋（Biceps）">
                                    <option value="バーベル・カール">バーベル・カール</option>
                                    <option value="EZバー・カール">EZバー・カール</option>
                                    <option value="プリーチャー・カール">プリーチャー・カール</option>
                                    <option value="ダンベル・カール">ダンベル・カール</option>
                                    <option value="ハンマー・カール">ハンマー・カール</option>
                                    <option value="インクライン・ダンベルカール">インクライン・ダンベルカール</option>
                                    <option value="コンセントレーション・カール">コンセントレーション・カール</option>
                                    <option value="スパイダー・カール">スパイダー・カール</option>
                                    <option value="ケーブル・カール">ケーブル・カール</option>
                                    <option value="マシン・プリーチャーカール">マシン・プリーチャーカール</option>
                                    <option value="マシン・ケーブル（上腕二頭筋）">マシン・ケーブル（上腕二頭筋）</option>
                                </optgroup>

                                <optgroup label="上腕三頭筋（Triceps）">
                                    <option value="ナローグリップ・ベンチプレス">ナローグリップ・ベンチプレス</option>
                                    <option value="スカルクラッシャー（ライイング・トライセプス・エクステンション）">スカルクラッシャー（ライイング・トライセプス・エクステンション）
                                    </option>
                                    <option value="フレンチ・プレス">フレンチ・プレス</option>
                                    <option value="JMプレス">JMプレス</option>
                                    <option value="ダンベル・トライセプス・エクステンション">ダンベル・トライセプス・エクステンション</option>
                                    <option value="ダンベル・キックバック">ダンベル・キックバック</option>
                                    <option value="トライセプス・プッシュダウン（ストレートバー／ロープ／Vバー）">トライセプス・プッシュダウン（ストレートバー／ロープ／Vバー）
                                    </option>
                                    <option value="オーバーヘッド・ケーブル・エクステンション">オーバーヘッド・ケーブル・エクステンション</option>
                                    <option value="マシン・ケーブル（上腕三頭筋）">マシン・ケーブル（上腕三頭筋）</option>
                                </optgroup>
                            </select>

                            <div id="custom-exercise-container" class="hidden"
                                style="margin-top: 1rem; display: flex; flex-direction: column; gap: 0.5rem;">
                                <input type="text" id="custom-exercise"
                                    style="width: 100%; padding: 1rem; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: var(--bg-color); color: var(--text-primary); font-size: 1.1rem; appearance: none; -webkit-appearance: none;"
                                    placeholder="新しい種目名を入力">
                            </div>
                        </div>
                        <button id="add-menu-btn" style="margin-top: 1rem;">今日のメニューに登録</button>
                    </div>

                    <div class="card menu-list-section">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h2 id="menu-list-title" style="margin: 0;">今日のメニュー</h2>
                            <div
                                style="display: flex; align-items: center; gap: 0.5rem; background: rgba(0,0,0,0.5); padding: 0.3rem 0.5rem; border-radius: 4px; border: 1px solid var(--border-color);">
                                <span style="font-size: 0.8rem; color: var(--text-secondary);">⏱️ 休憩</span>
                                <select id="rest-timer-duration"
                                    style="background: transparent; color: var(--text-primary); border: none; outline: none; font-size: 0.85rem; font-weight: 600; cursor: pointer; padding-left: 0.2rem;">
                                    <option value="60">1分</option>
                                    <option value="90" selected>1分30秒</option>
                                    <option value="120">2分</option>
                                    <option value="150">2分30秒</option>
                                    <option value="180">3分</option>
                                    <option value="240">4分</option>
                                    <option value="300">5分</option>
                                </select>
                            </div>
                        </div>
                        <div
                            style="display: flex; justify-content: space-around; margin-bottom: 1.5rem; background: rgba(255,255,255,0.03); padding: 1.2rem 1rem; border: 1px solid var(--border-color); border-radius: 0;">
                            <div id="total-volume-display" style="text-align: center;">
                                <span
                                    style="font-size: 0.85rem; color: var(--text-secondary); display: block; margin-bottom: 0.3rem; letter-spacing: 0.05em;">合計ボリューム</span>
                                <span id="total-volume-value"
                                    style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary); font-variant-numeric: tabular-nums;">0
                                    <span
                                        style="font-size: 1rem; font-weight: 400; color: var(--text-secondary);">kg</span></span>
                            </div>
                            <div style="width: 1px; background: rgba(255,255,255,0.1);"></div>
                            <div id="workout-timer-display" style="text-align: center;">
                                <span
                                    style="font-size: 0.85rem; color: var(--text-secondary); display: block; margin-bottom: 0.3rem; letter-spacing: 0.05em;">経過時間</span>
                                <span id="workout-timer-value"
                                    style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary); font-variant-numeric: tabular-nums;">00:00:00</span>
                            </div>
                        </div>
                        <ul id="workout-menu-list" class="menu-list">
                            <!-- 追加されたメニューがここに表示される -->
                            <li class="empty-message">メニューが登録されていません</li>
                        </ul>
                        <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                            <button id="save-menu-btn"
                                style="flex: 2; border: none; font-weight: bold; background: var(--text-primary); color: #000000;">保存</button>
                            <button id="clear-menu-btn" class="btn-secondary" style="flex: 1;">全クリア</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Workout Review Tab -->
            <div id="review-tab" class="tab-content hidden">
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2
                        style="font-size: 1.1rem; margin-bottom: 1.5rem; color: var(--text-primary); text-align: center; font-weight: 600;">
                        過去の記録を振り返る</h2>

                    <div class="input-group">
                        <label for="review-date-select">記録を見る日付</label>
                        <select id="review-date-select" style="cursor: pointer; padding: 0.8rem; width: 100%;">
                            <option value="" disabled selected>日付を選択</option>
                            <!-- JSで動的に追加される -->
                        </select>
                    </div>
                </div>

                <div id="review-details" class="card" style="display: none;">
                    <h3 id="review-date-title"
                        style="font-size: 1.2rem; color: var(--text-primary); text-align: center; margin-bottom: 1.5rem;">
                    </h3>

                    <div
                        style="display: flex; justify-content: space-around; margin-bottom: 1.5rem; background: rgba(255,255,255,0.03); padding: 1.2rem 1rem; border: 1px solid var(--border-color); border-radius: 0;">
                        <div style="text-align: center;">
                            <span
                                style="font-size: 0.85rem; color: var(--text-secondary); display: block; margin-bottom: 0.3rem; letter-spacing: 0.05em;">合計ボリューム</span>
                            <span id="review-total-volume"
                                style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary); font-variant-numeric: tabular-nums;">0
                                <span
                                    style="font-size: 1rem; font-weight: 400; color: var(--text-secondary);">kg</span></span>
                        </div>
                        <div style="width: 1px; background: rgba(255,255,255,0.1);"></div>
                        <div style="text-align: center;">
                            <span
                                style="font-size: 0.85rem; color: var(--text-secondary); display: block; margin-bottom: 0.3rem; letter-spacing: 0.05em;">所要時間</span>
                            <span id="review-duration"
                                style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary); font-variant-numeric: tabular-nums;">--:--:--</span>
                        </div>
                    </div>

                    <ul id="review-workout-list" class="menu-list">
                        <!-- Populated by JS -->
                    </ul>
                </div>
                <div id="review-empty-message" class="empty-message">記録がありません</div>
            </div>
            <!-- Settings Tab -->
            <div id="settings-tab" class="tab-content hidden">
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2
                        style="font-size: 1.1rem; margin-bottom: 2rem; color: var(--text-primary); text-align: center; font-weight: 600;">
                        データ管理・バックアップ
                    </h2>

                    <div
                        style="margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 1px solid var(--border-color);">
                        <h3 style="font-size: 0.95rem; color: var(--text-primary); margin-bottom: 0.5rem;">データをバックアップ
                            (エクスポート)</h3>
                        <p style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 1rem;">
                            現在のすべてのトレーニング記録と設定を、1つのJSONファイルとして端末にダウンロード保存します。機種変更前などに実行してください。
                        </p>
                        <button id="export-data-btn" class="modal-btn"
                            style="width: 100%; border: 1px solid var(--text-primary);">
                            📥 バックアップファイルを保存
                        </button>
                    </div>

                    <div>
                        <h3 style="font-size: 0.95rem; color: var(--text-primary); margin-bottom: 0.5rem;">データを復元
                            (インポート)</h3>
                        <p style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 1rem;">
                            保存しておいたバックアップファイル(JSON)を選択して、以前の記録を復元します。（既存のデータに上書き保存、または結合して追加するかを選べます）
                        </p>

                        <input type="file" id="import-file-input" accept=".json" style="display: none;">
                        <button id="import-data-btn" class="btn-secondary" style="width: 100%;">
                            📤 バックアップファイルを読み込む
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Custom Alert Modal -->
    <div id="custom-alert-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 class="modal-title">未完了のメニューがあります</h3>
            <p class="modal-message">以下の種目に未完了のセットがあります。<br>完了にしてから保存してください。</p>
            <ul id="modal-uncompleted-list" class="modal-list"></ul>
            <button id="modal-close-btn" class="modal-btn">確認</button>
        </div>
    </div>

    <!-- Rest Timer UI -->
    <div id="rest-timer-ui" class="rest-timer-overlay hidden">
        <div class="rest-timer-content">
            <span class="rest-timer-label">REST</span>
            <span id="rest-timer-display" class="rest-timer-time">01:30</span>
            <button id="rest-timer-skip-btn" class="rest-timer-btn">スキップ</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>